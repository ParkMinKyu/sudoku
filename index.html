<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>스도쿠 게임 (sudoku game)</title>
<style type="text/css">
.area{
    font-size: 29pt;
    text-align: center;
	width:60px;
	height: 60px;
	border: 1px solid;
	margin-left:5px;
	float: left;
}

.row{
	height: 60px; 
	margin-bottom: 10px;
	clear: both;
}

.row > .top{
	border-top: 3px solid;
}
.row > .bottom{
	border-bottom: 3px solid;
}
.row > .left{
	border-left: 3px solid;
}
.row > .right{
	border-right: 3px solid;
}
</style>
<script type="text/javascript" src="jquery-1.11.3.min.js"></script>
<script type="text/javascript">
$(function(){
	var map = [[0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0],
			[0,0,0,0,0,0,0,0,0]];
	
	/* $('.area').attr("contenteditable","true"); */
	
	createMap();
	shuffleMap(5);
	putNumber();
	setGameNumber();
	
	function createMap(){
		let nums = makeBasicNumber();
		
		for(let x = 0 ; x < 9 ; x ++){
			for(let y = 0 ; y < 9 ;  y ++){
				let pox = parseInt((x*3) >= 9 ? (x*3)/9 + (x*3)%9 : (x*3));
				let poy = parseInt((y+x) >= 9 ? (y+x)%9 : (y+x));
				map[pox][poy]=nums[y];
			}
		}
		
		console.log(map)
	}
	
	function shuffleMap(count){
		for(let cnt = 0 ; cnt < count ; cnt ++){
			let poy1 = parseInt(Math.random()*8);
			let poy2 = (poy1) % 3 == 2 ? (poy1 - (parseInt(Math.random()*2)+1)) : (poy1 + (parseInt(Math.random()*2)+1));
			if((poy1) % 3 == 1){
				poy2 = parseInt(Math.random()*2) == 0 ? (poy1 - 1) : (poy1 + 1);
			}
			for(let x = 0 ; x < 9 ; x ++){
				let temp = map[x][poy1];
				map[x][poy1] = map[x][poy2];
				map[x][poy2] = temp;
			}
		}
		
		console.log(map)
	}
	
	function putNumber(){
		for(let x = 0 ; x < 9 ; x ++){
			for(let y = 0 ; y < 9 ;  y ++){
				$('.row').eq(x).find('div').eq(y).text(map[x][y]);
			}
		}
	}
	
	function makeBasicNumber(){
		let count = 0;
		let numbers = [0,0,0,0,0,0,0,0,0];
		while(numbers.indexOf(0) != -1){
			let number = parseInt(Math.random()*9)+1;
			if(numbers.indexOf(number) == -1){
				numbers[count] = number;
				count++;
			}
		}
		return numbers;
	}
	
	function setGameNumber(){
		for(let i = 0 ; i < 35 ; i ++){
			let pox = parseInt(Math.random()*9);
			let poy = parseInt(Math.random()*9);
			$('.row').eq(pox).find('div').eq(poy).attr("contenteditable","true").text('');
		}
	}

	function forloopMap(callback){
		for(let x = 0 ; x < 9 ; x ++){
			for(let y = 0 ; y < 9 ;  y ++){
				callback(x,y);
			}
		}
	}
	
	$('#finishBtn').click(function(){
		for(let x = 0 ; x < 9 ; x ++){
			for(let y = 0 ; y < 9 ;  y ++){
				let realNum = map[x][y];
				let userNum = parseInt($('.row').eq(x).find('div').eq(y).text());
				if(realNum != userNum){
					alert('You Faild.');
					return false;
				}
			}
		}
		
		alert("You Win.");
		$('#reloadBtn').click();
	});

	$('#reloadBtn').click(function(){
		location.reload();
	});
});
</script>
</head>
<body>
<button id="reloadBtn">reload</button>
<div id="map" style="padding: 10px;">
	<div class="row">
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
	</div>
	<div class="row">
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
	</div>
	<div class="row">
		<div class="area left bottom"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
		<div class="area bottom left"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
		<div class="area bottom left"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
	</div>
	<div class="row">
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
	</div>
	<div class="row">
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
	</div>
	<div class="row">
		<div class="area left bottom"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
		<div class="area bottom left"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
		<div class="area bottom left"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
	</div>
	<div class="row">
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
		<div class="area top left"></div>
		<div class="area top"></div>
		<div class="area top right"></div>
	</div>
	<div class="row">
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
		<div class="area left"></div>
		<div class="area"></div>
		<div class="area right"></div>
	</div>
	<div class="row">
		<div class="area left bottom"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
		<div class="area bottom left"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
		<div class="area bottom left"></div>
		<div class="area bottom"></div>
		<div class="area bottom right"></div>
	</div>
</div>

<button id="finishBtn">submit</button>
</body>
</html>
